{"version":3,"file":"hockey-field-model.js","sourceRoot":"","sources":["../../../src/hockey-field-model.ts"],"names":[],"mappings":";;;IAGA;QACI,IAAW,KAAK;YACZ,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;QAED,IAAW,MAAM;YACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;QAED,IAAW,MAAM,CAAC,KAAc;YAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC,CAAC;gBAAA,MAAM,CAAC;YAAA,CAAC;YACrC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACR,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,KAAK,SAAS,CAAC,CAAC,CAAC;oBAClC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBAC5D,CAAC;gBACD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACnC,CAAC;QACL,CAAC;QAED,IAAW,YAAY;YACnB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QAC9B,CAAC;QACD,IAAW,IAAI;YACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACtB,CAAC;QASD,YAAY,IAAY,EAAE,YAAoB,EAAE,YAAqB;YACjE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;YAClC,IAAI,CAAC,YAAY,GAAG,cAAc,GAAG,YAAY,CAAC;YAClD,IAAI,CAAC,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;YAC1B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,MAAM,GAAG,IAAI,6CAAkB,EAAE,CAAC;QAC3C,CAAC;QAEM,IAAI;YACP,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACd,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE;gBACjC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACvB,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;QACxC,CAAC;QAEM,SAAS,CAAC,MAAc;YAC3B,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;QACtC,CAAC;QAEM,UAAU,CAAC,KAAa;YAC3B,MAAM,CAAC,KAAK,GAAC,IAAI,CAAC,YAAY,CAAC;QACnC,CAAC;KACJ;IA7DD,gCA6DC","sourcesContent":["import {CustomEventHandler} from \"./my-custom-events-handler\";\n\n\nexport class FieldModel {\n    public get image(): HTMLImageElement {\n        return this._image;\n    }\n\n    public get loaded(): boolean {\n        return this._loaded;\n    }\n\n    public set loaded(value: boolean) {\n        if (this._loaded === value) {return;}\n        this._loaded = value;\n        if (value) {\n            if (this.aspect_ratio === undefined) {\n                this._aspect_ratio = this.image.width/this.image.height;\n            }\n            this.onload.Invoke(this, true);\n        }\n    }\n\n    public get aspect_ratio(): number {\n        return this._aspect_ratio;\n    }\n    public get name(): string {\n        return this._name;\n    }\n\n    public onload: CustomEventHandler<FieldModel, boolean>;\n    private image_source: string;\n    private _loaded: boolean;\n    private _image: HTMLImageElement;\n    private _name: string;\n    private _aspect_ratio: number;\n\n    constructor(name: string, image_source: string, aspect_ratio?: number) {\n        this._name = name;\n        this._aspect_ratio = aspect_ratio;\n        this.image_source = \"public_data/\" + image_source;\n        this._image = new Image();\n        this._loaded = false;\n        this.onload = new CustomEventHandler();\n    }\n\n    public load(): boolean {\n        this.loaded = false;\n        if (this.loaded) {\n            return false;\n        }\n        this._image.addEventListener(\"load\", () => {\n            this.loaded = true;\n        });\n        this._image.src = this.image_source;\n    }\n\n    public get_width(height: number): number {\n        return this.aspect_ratio * height;\n    }\n\n    public get_height(width: number): number {\n        return width/this.aspect_ratio;\n    }\n}\n"]}